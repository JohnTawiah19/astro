import fs from "fs";
import npath from "path";
import { fileURLToPath } from "url";
function emptyDir(dir, skip) {
  for (const file of fs.readdirSync(dir)) {
    if (skip == null ? void 0 : skip.has(file)) {
      continue;
    }
    const abs = npath.resolve(dir, file);
    if (fs.lstatSync(abs).isDirectory()) {
      emptyDir(abs);
      fs.rmdirSync(abs);
    } else {
      fs.unlinkSync(abs);
    }
  }
}
function prepareOutDir(astroConfig) {
  const outDir = fileURLToPath(astroConfig.dist);
  if (fs.existsSync(outDir)) {
    return emptyDir(outDir, new Set([".git"]));
  }
}
export {
  emptyDir,
  prepareOutDir
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL2NvcmUvYnVpbGQvZnMudHMiXSwKICAibWFwcGluZ3MiOiAiQUFFQTtBQUNBO0FBQ0E7QUFFTyxrQkFBa0IsS0FBYSxNQUEwQjtBQUMvRCxhQUFXLFFBQVEsR0FBRyxZQUFZLE1BQU07QUFDdkMsUUFBSSw2QkFBTSxJQUFJLE9BQU87QUFDcEI7QUFBQTtBQUVELFVBQU0sTUFBTSxNQUFNLFFBQVEsS0FBSztBQUUvQixRQUFJLEdBQUcsVUFBVSxLQUFLLGVBQWU7QUFDcEMsZUFBUztBQUNULFNBQUcsVUFBVTtBQUFBLFdBQ1A7QUFDTixTQUFHLFdBQVc7QUFBQTtBQUFBO0FBQUE7QUFLVix1QkFBdUIsYUFBMEI7QUFDdkQsUUFBTSxTQUFTLGNBQWMsWUFBWTtBQUN6QyxNQUFJLEdBQUcsV0FBVyxTQUFTO0FBQzFCLFdBQU8sU0FBUyxRQUFRLElBQUksSUFBSSxDQUFDO0FBQUE7QUFBQTsiLAogICJuYW1lcyI6IFtdCn0K
